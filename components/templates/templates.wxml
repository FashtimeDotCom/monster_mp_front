<import src="/components/wxParse/wxParse.wxml"/>

<!-- 搜索 -->
<template name="zcSearch">
  <view class="tcommunity-search" wx:if="{{data.customFeature.searchObject.type === 'topic'}}" style="{{data.style}}">
    <label for="tcommunity-search-input" class="tcommunity-search-input-label" style="{{data.showCenter ? '' : 'width: 100%;'}}">
      <span class="ico-moon icon-search tcommunity-search-icon"></span><input class="tcommunity-search-input" type="text" name="tcommunity-search-input" data-compid="{{data.compId}}" data-topic-id="{{data.customFeature.searchObject.id}}" data-topic-compid="{{data.relateTopicCompId}}" catchblur="searchForTopicAct" bindinput="topicSearchInputAct" value="{{data.searchValue}}" placeholder="{{data.content.placeholder}}"/></label>
    <label wx:if="{{data.showCenter}}" class="tcommunity-search-usercenter" catchtap="turnToTopicUserCenter"><image src="{{userInfo.cover_thumb}}" mode="aspectFill"></image></label>
    <label wx:if="{{data.showCenter}}" class="ico-moon icon-community_notify tcommunity-search-notify" catchtap="turnToTopicNotify"><span class="tcommunity-search-notify-count" wx:if="{{false}}">12</span></label>
  </view>
  <view wx:else class="element search {{data.customFeature.ifLocation ? 'another-style' : ''}}" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
    <view class="ico-moon icon-location location" wx:if="{{data.customFeature.ifLocation}}" data-param="{{data.customFeature.ifLocation}}" data-listid="{{data.customFeature.searchObject.customFeature.id}}" data-compid="{{data.compId}}" catchtap="turnToSearchPage">全国</view>
    <view class="search-input">
       <icon size="14" type="search"></icon>
       <view bindtap="turnToSearchPage" wx:if="{{data.customFeature.searchObject.type=='goods-list'}}" data-form="{{data.customFeature.searchObject.customFeature.form}}" data-listid="{{data.customFeature.searchObject.customFeature.id}}" data-compid="{{data.compId}}" class="fakeSearch" ></view>
       <input data-compid="{{ data.compId }}" bindinput="bindSearchTextChange" bindconfirm="searchList" name="input" placeholder="{{data.content.placeholder}}" confirm-type="search" />
       <view data-compid="{{ data.compId }}"
             data-listid="{{data.customFeature.searchObject.customFeature.id}}"
             data-listtype="{{data.customFeature.searchObject.type}}"
             data-form="{{data.customFeature.searchObject.customFeature.form}}"
            class="search-btn" bindtap="searchList">搜索</view>
    </view>
  </view>
</template>


<!-- 悬浮窗 -->
<template name="zcSuspension">
  <scroll-view class="element suspension" style="{{data.style}}{{data.customFeature['background-image']?'background:'+ data.customFeature['background-image']:''}}{{data.suspension_bottom == -1 ? '' : 'bottom: ' + data.suspension_bottom + 'rpx;'}}width:{{data.suspension_width}}rpx;height:{{data.suspension_height}}rpx;border-radius:0;"
    bindanimationend="animationEnd" scroll-x="{{data.customFeature.mode == 1 ? true:false}}" scroll-y="{{data.customFeature.mode == 1 ? false:true}}"
    data-compid="{{ data.compId }}">
    <view class="suspension-content" style="height:100%;width:100%;position: relative;">
      <view class="{{(data.customFeature.width && data.customFeature.height) ? 'suspension-wrap ':''}} {{data.customFeature.mode == 1 ? 'suspension-sideways' : ''}}"
        style="{{(data.customFeature.width && data.customFeature.height) ? '':'height:100%;'}}">
        <block wx:for="{{data.content}}" wx:key="">
          <block wx:if="{{item.customFeature.action == 'contact'}}">
            <view class="suspension-box flex-column" style="{{data.customFeature.mode == 1 ? 'margin-right:':'margin-bottom:'}}{{data.suspension_margin}}rpx;">
              <button open-type="contact" session-from="suspension"></button>
              <view wx:if="{{data.customFeature.openIcon}}" class="suspension-item diy" style="{{data.list_style}}{{data.customFeature.lineBackgroundImage?'background:'+ data.customFeature.lineBackgroundImage:''}}; margin-left:0;margin-right:0;margin-bottom:0; width:{{data.suspension_imgSize}}rpx;height:{{data.suspension_imgSize}}rpx;">
                <image style="width:100%;height:100%;" src="{{item.pic}}"></image>
              </view>
              <view wx:if="{{data.customFeature.openText}}" class="suspension-title">{{item.title}}</view>
            </view>
          </block>
          <block wx:elif="{{item.customFeature.action == 'turn-to-xcx'}}">
            <view class="suspension-box flex-column" style="{{data.customFeature.mode == 1 ? 'margin-right:':'margin-bottom:'}}{{data.suspension_margin}}rpx;">
              <view wx:if="{{data.customFeature.openIcon}}" class="suspension-item diy" style="{{data.list_style}}{{data.customFeature.lineBackgroundImage?'background:'+ data.customFeature.lineBackgroundImage:''}}; margin-left:0;margin-right:0;margin-bottom:0; width:{{data.suspension_imgSize}}rpx;height:{{data.suspension_imgSize}}rpx;">
                <navigator target="miniProgram" open-type="navigate" app-id="{{item.customFeature['xcx-appid']}}" path="{{item.customFeature['xcx-page-url'] || ''}}"
                  version="release">
                  <image style="width:100%;height:100%;" src="{{item.pic}}"></image>
                </navigator>
              </view>
              <view wx:if="{{data.customFeature.openText}}" class="suspension-title">{{item.title}}</view>
            </view>
          </block>
          <block wx:else>
            <view class="suspension-box flex-column" style="{{data.customFeature.mode == 1 ? 'margin-right:':'margin-bottom:'}}{{data.suspension_margin}}rpx;"
              data-event-params="{{item.customFeature}}" catchtap="{{item.customFeature.action && item.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}">
              <view wx:if="{{data.customFeature.openIcon}}" class="suspension-item diy" style="{{data.list_style}}{{data.customFeature.lineBackgroundImage?'background:'+ data.customFeature.lineBackgroundImage:''}}; margin-left:0;margin-right:0;margin-bottom:0; width:{{data.suspension_imgSize}}rpx;height:{{data.suspension_imgSize}}rpx;">
                <image class="old-and-new" style="width:100%;height:100%;" src="{{item.pic}}"></image>
              </view>
              <view wx:if="{{data.customFeature.openText}}" class="suspension-title">{{item.title}}</view>
            </view>
          </block>
        </block>
        <view class="old-suspension" wx:if="{{data.customFeature.appendComponent}}">
          <view class="suspension-item" data-type="service" wx:if="{{data.customFeature.appendComponent.service}}"
            style="{{data.list_style}}">
            <icon class="ico-moon icon-service2 suspension-service">
              <button open-type="contact" session-from="suspension"></button>
            </icon>
          </view>
          <view class="suspension-item" data-router="myOrder" wx:if="{{data.customFeature.appendComponent.myOrder}}"
            catchtap="suspensionTurnToPage" style="{{data.list_style}}">
            <icon class="ico-moon icon-notebook"></icon>
          </view>
          <view class="suspension-item" data-router="shoppingCart" wx:if="{{data.customFeature.appendComponent.shoppingCart}}"
            catchtap="suspensionTurnToPage" style="{{data.list_style}}">
            <icon class="ico-moon icon-shoppingcart"></icon>
          </view>
          <view class="suspension-item" data-type="top" wx:if="{{data.customFeature.appendComponent.top}}" catchtap="scrollPageTop"
            style="{{data.list_style}}">
            <icon class="ico-moon icon-top"></icon>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
</template>



<!-- 图片 -->
<wxs module="pictureWxsModule">
  var isArray = function(array) {
    return array.join ? true : false;
  }
  module.exports.isArray = isArray;
</wxs>
<template name="zcPicture">
  <block wx:if="{{real_value && (data.customFeature.action !== 'call' || data.customFeature.phoneDisplayContent !== 'static')}}">
    <block wx:if="{{pictureWxsModule.isArray(real_value)}}">
      <block wx:if="{{data.customFeature.action == 'turn-to-xcx'}}">
        <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
          <view class="element picture" style="{{data.style}}" wx:for="{{real_value}}" wx:key="" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
            <image src="{{real_value[index]}}" mode="scaleToFill"></image>
          </view>
        </navigator>
      </block>
      <block wx:elif="{{ is_group}}">
        <view class="element picture" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          <image src="{{group_data.goods_img}}" mode="scaleToFill"></image>
        </view>
      </block>
      <block wx:else>
        <view data-compdata="{{ data }}" data-real-value="{{ real_value }}" class="element picture" style="{{data.style}}{{imgStyle}}" wx:for="{{real_value}}" wx:key="" data-event-params="{{data.customFeature}}" data-img="{{real_value[index]}}" data-imgArr="{{real_value}}"
          catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          <image src="{{real_value[index]}}" mode="scaleToFill"></image>
        </view>
      </block>
    </block>
    <block wx:else>
      <block wx:if="{{data.customFeature.action == 'turn-to-xcx'}}">
        <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
          <view class="element picture" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
            <image src="{{real_value}}" mode="scaleToFill"></image>
          </view>
        </navigator>
      </block>
      <block wx:else>
        <view data-compdata="{{ data }}" class="element picture" style="{{data.style}}{{imgStyle}}" data-event-params="{{data.customFeature}}" data-img="{{real_value}}" data-imgArr="{{real_value}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          <image src="{{real_value}}" mode="scaleToFill"></image>
        </view>
      </block>
    </block>
  </block>
  <block wx:elif="{{data.customFeature.action == 'turn-to-xcx'}}">
    <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
      <view class="element picture" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
        <image wx:if="{{!data.customFeature.backgroundType}}" src="{{data.content}}" mode="scaleToFill"></image>
      </view>
    </navigator>
  </block>

  <block wx:else>
    <view data-compdata="{{ data }}" data-real-value="{{ real_value }}" class="element picture" style="{{data.style}}" data-event-params="{{data.customFeature}}" data-img="{{data.content}}" data-imgArr="{{data.content}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd"
      data-compid="{{ data.compId }}">
       <image wx:if="{{!data.customFeature.backgroundType}}" src="{{data.content}}" mode="scaleToFill"></image>
    </view>
  </block>
</template>

<!-- 按钮 -->
<wxs module="buttonWxsModule">
var isArray = function(array) {
  return array instanceof Array;
}
module.exports.isArray = isArray;
</wxs>
<template name="zcButton">
  <block wx:if="{{real_value}}">
    <block wx:if="{{buttonWxsModule.isArray(real_value)}}">
      <block wx:if="{{data.customFeature.action == 'share'}}">
        <button class="element button" open-type="{{data.customFeature.action}}" style="{{data.style}}" data-desc="{{data.customFeature.desc}}"  data-image="{{data.customFeature.shareImage || ''}}" catchtap="onShareAppMessage" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          <view class="wxParse">
            <template is="wxParse" data="{{wxParseData: real_value}}"/>
          </view>
        </button>
      </block>
      <block wx:elif="{{data.customFeature.action == 'contact'}}">
        <button class="element button" open-type="{{data.customFeature.action}}" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          <view class="wxParse">
            <template is="wxParse" data="{{wxParseData: real_value}}"/>
          </view>
        </button>
      </block>
      <block wx:elif="{{data.customFeature.action == 'turn-to-xcx'}}">
        <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
          <label class="element button" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
            <view class="wxParse">
              <template is="wxParse" data="{{wxParseData: real_value}}"/>
            </view>
          </label>
        </navigator>
      </block>
      <block wx:else>
        <label class="element button" style="{{data.style}}" data-event-params="{{data.customFeature}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          <view class="wxParse">
            <template is="wxParse" data="{{wxParseData: real_value}}"/>
          </view>
        </label>
      </block>
    </block>
    <block wx:else>
      <block wx:if="{{data.customFeature.action == 'share'}}">
        <button class="element button" open-type="{{data.customFeature.action}}" style="{{data.style}}" data-desc="{{data.customFeature.desc}}"  data-image="{{data.customFeature.shareImage || ''}}" catchtap="onShareAppMessage" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          {{real_value}}
        </button>
      </block>
      <block wx:elif="{{data.customFeature.action == 'contact'}}">
        <button class="element button" open-type="{{data.customFeature.action}}" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          {{data.content}}
        </button>
      </block>
      <block wx:elif="{{data.customFeature.action == 'turn-to-xcx'}}">
        <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
          <label class="element button" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
            {{real_value}}
          </label>
        </navigator>
      </block>
      <block wx:else>
        <label class="element button" style="{{data.style}}" data-event-params="{{data.customFeature}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          {{real_value}}
        </label>
      </block>
    </block>
  </block>
  <block wx:else>
    <block wx:if="{{data.customFeature.action == 'share' }}">
      <button class="element button" open-type="{{data.customFeature.action}}" style="{{data.style}}" data-desc="{{data.customFeature.desc}}"  data-image="{{data.customFeature.shareImage || ''}}" catchtap="onShareAppMessage" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
        {{data.content}}
      </button>
    </block>
    <block wx:elif="{{data.customFeature.action == 'contact'}}">
      <button class="element button" open-type="{{data.customFeature.action}}" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
        {{data.content}}
      </button>
    </block>
    <block wx:elif="{{data.customFeature.action == 'turn-to-xcx'}}">
      <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
        <label class="element button" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          {{data.content}}
        </label>
      </navigator>
    </block>
    <block wx:else>
      <label class="element button" style="{{data.style}}" data-event-params="{{data.customFeature}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
        {{data.content}}
      </label>
    </block>
  </block>
</template>

<!-- 文本 -->
<wxs module="textWxsModule">
  var isArray = function(array) {
    return array instanceof Array;
  }
  module.exports.isArray = isArray;
</wxs>
<template name="zcText">
  <block wx:if="{{real_value && (data.customFeature.action !== 'call' || data.customFeature.phoneDisplayContent !== 'static')}}">
    <block wx:if="{{textWxsModule.isArray(real_value)}}">
      <block wx:if="{{data.customFeature.action == 'turn-to-xcx'}}">
        <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
          <view class="element text {{data.customFeature.isWordWrap == 1 ? 'text-word-wrap' : '' }}" style="{{data.style}}{{data.customFeature.isWordWrap == 1 ? '-webkit-line-clamp:' + data.customFeature['word-wrap'] : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
            <block wx:if="{{ parent_form === 'form' }}">
              {{ real_value }}
            </block>
            <block wx:else>
              <view class="wxParse">
                <template is="wxParse" data="{{wxParseData: real_value}}" />
              </view>
            </block>
          </view>
        </navigator>
      </block>
      <block wx:else>
        <view data-compdata="{{ data }}" data-real-value="{{ real_value }}" class="element text {{data.customFeature.isWordWrap == 1 ? 'text-word-wrap' : '' }}" style="{{data.style}}{{data.customFeature.isWordWrap == 1 ? '-webkit-line-clamp:' + data.customFeature['word-wrap'] : ''}}{{textStyle}}"
          data-event-params="{{data.customFeature}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
          <block wx:if="{{ parent_form === 'form' }}">
            {{ real_value }}
          </block>
          <block wx:else>
            <view class="wxParse">
              <template is="wxParse" data="{{wxParseData: real_value}}" />
            </view>
          </block>
        </view>
      </block>
    </block>
    <block wx:else>
      <block wx:if="{{data.customFeature.action == 'turn-to-xcx'}}">
        <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
          <text class="element text {{data.customFeature.isWordWrap == 1 ? 'text-word-wrap' : '' }}" style="{{data.style}}{{data.customFeature.isWordWrap == 1 ? '-webkit-line-clamp:' + data.customFeature['word-wrap'] : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}" selectable>{{data.customFeature.phoneDisplayContent === 'static' ? data.content : real_value}}</text>
        </navigator>
      </block>
      <block wx:else>
        <text data-compdata="{{ data }}" class="element text {{data.customFeature.isWordWrap == 1 ? 'text-word-wrap' : '' }}" style="{{data.style}}{{data.customFeature.isWordWrap == 1 ? '-webkit-line-clamp:' + data.customFeature['word-wrap'] : ''}}" data-event-params="{{data.customFeature}}"
          catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}" selectable>{{data.customFeature.phoneDisplayContent === 'static' ? data.content : real_value}}</text>
      </block>
    </block>
  </block>
  <block wx:elif="{{data.customFeature.segment == 'default_map' && form_data}}">
    <!-- 动态列表绑定地图 -->
    <text class="element text {{data.customFeature.isWordWrap == 1 ? 'text-word-wrap' : '' }}" style="{{data.style}}{{data.customFeature.isWordWrap == 1 ? '-webkit-line-clamp:' + data.customFeature['word-wrap'] : ''}}" data-latitude="{{form_data.region_lat}}"
      data-longitude="{{form_data.region_lng}}" data-address="{{(form_data.region_string || '') + (form_data.region_detail || '')}}" data-event-params="{{data.customFeature}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" selectable>{{(form_data.region_string || '') + (form_data.region_detail || '')}}</text>
  </block>
  <block wx:elif="{{data.customFeature.segment == 'default_map'}}">
    <!-- 详情页绑定地图 -->
    <text class="element text {{data.customFeature.isWordWrap == 1 ? 'text-word-wrap' : '' }}" style="{{data.style}}{{data.customFeature.isWordWrap == 1 ? '-webkit-line-clamp:' + data.customFeature['word-wrap'] : ''}}" data-latitude="{{detail_data.region_lat}}"
      data-longitude="{{detail_data.region_lng}}" data-address="{{(detail_data.region_string || '') + (detail_data.region_detail || '')}}" catchtap="textToMap" selectable>{{((detail_data.region_string || '') + (detail_data.region_detail || '')) || detail_data.default_map[0].text}}</text>
  </block>
  <block wx:elif="{{data.customFeature.action == 'turn-to-xcx'}}">
    <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
      <text class="element text {{data.customFeature.isWordWrap == 1 ? 'text-word-wrap' : '' }}" style="{{data.style}}{{data.customFeature.isWordWrap == 1 ? '-webkit-line-clamp:' + data.customFeature['word-wrap'] : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}" selectable>{{data.content}}</text>
    </navigator>
  </block>
  <block wx:else>
    <text data-compdata="{{ data }}" data-real-value="{{ real_value }}" class="element text {{data.customFeature.isWordWrap == 1 ? 'text-word-wrap' : '' }}" style="{{data.style}}{{data.customFeature.isWordWrap == 1 ? '-webkit-line-clamp:' + data.customFeature['word-wrap'] : ''}}"
      data-event-params="{{data.customFeature}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}" selectable>{{data.content}}</text>

  </block>
</template>

<!-- 标题 -->
<template name="zcTitle">
  <block wx:if="{{data.customFeature.action == 'turn-to-xcx'}}">
    <view class="element title-ele {{ 'title-mode'+ (data.mode ? data.mode : '') }}" mode="{{data.mode}}" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
      <navigator target="miniProgram" open-type="navigate" app-id="{{data.customFeature['xcx-appid']}}" path="{{data.customFeature['xcx-page-url'] || ''}}" version="release">
        <view class="title-content">
          <view class="title-text" wx:if="{{data.mode == 0}}">
            <text class="mark"></text>
            <text class="js-text">{{data.content}}</text>
          </view>
          <view class="title-text" wx:if="{{data.mode == 1 || data.mode == 3}}">
            <view class="mark_warp_left">
              <text class="mark mark_left" style="{{'background-color: ' + data.customFeature.markColor + ';right:' + data.customFeature['markMargin-right']}}"></text>
            </view>
            <text class="js-text">{{data.content}}</text>
          </view>
          <view class="title-text" wx:if="{{data.mode == 2}}">
            <view class="js-text mark_bottom">
              <view class='mark_bottom-title' style="{{'padding-bottom: ' + data.customFeature['markMargin-top']}}">{{data.content}}<text class="mark" style="{{'background-color: ' + data.markColor}}"></text></view>
            </view>
          </view>
        </view>
      </navigator>
    </view>
  </block>
  <block wx:else>
    <view class="element title-ele {{ 'title-mode'+ (data.mode ? data.mode : '') }}" mode="{{data.mode}}" style="{{data.style}}" data-event-params="{{data.customFeature}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
      <view class="title-content">
        <view class="title-text" wx:if="{{data.mode == 0}}">
          <text class="mark"></text>
          <text class="js-text">{{data.content}}</text>
        </view>
        <view class="title-text" wx:if="{{data.mode == 1 || data.mode == 3}}">
          <view class="mark_warp_left">
            <text class="mark mark_left" style="{{'background-color: ' + data.customFeature.markColor + ';right:' + data.customFeature['markMargin-right']}}"></text>
          </view>
          <text class="js-text">{{data.content}}</text>
        </view>
        <view class="title-text" wx:if="{{data.mode == 2}}">
         <!-- style="{{'padding-bottom: ' + data.customFeature['markMargin-top']}}" -->
          <view class="js-text mark_bottom">
            <view class='mark_bottom-title' style="{{'padding-bottom: ' + data.customFeature['markMargin-top']}}">{{data.content}}<text class="mark" style="{{'background-color: ' + data.markColor}}"></text></view>
          </view>
        </view>
      </view>
    </view>
  </block>
</template>



<!-- 横线 -->
<template name="zcBreakline">
  <view class="element breakline" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}"></view>
</template>

<!-- 公告 -->
<template name="dqAnnounce">
  <component-announce announce="{{data}}"></component-announce>
</template>


<!-- 筛选组件 -->
<wxs module="filterWxsModule">
  var parseStyle = function(style) {
    var styleArr1 = ["width", "height", "margin-top", "font-size"];
    var styleArr2 = ["background-color", "font-style", "font-weight", "text-decoration", "opacity", "color"];
    var s = '';
    for (var i = 0; i < styleArr1.length; i++) {
      var idx = styleArr1[i];
      if(style[idx]){
        s += idx + ':' + (parseInt(style[idx]) * 2.34375) + 'rpx;'
        if(idx == "height"){
          s += 'line-height:' + (parseInt(style[idx]) * 2.34375) + 'rpx;'
        }
      }
    }
    for (var i = 0; i < styleArr2.length; i++) {
      var idx = styleArr2[i];
      if(style[idx]){
        s += idx + ':' + style[idx] + ';'
      }
    }
    return s;
  }
  module.exports.parseStyle = parseStyle;
</wxs>
<template name="zcFilter">
  <view class="element goodsFilter" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
    <view class="goodsFilter-search-wrap">
      <view class="goodsFilter-search-inner" style="{{filterWxsModule.parseStyle(data.customFeature.searchStyle.style)}}" data-form="goods" data-compid="{{data.compId}}" data-listid="{{data.customFeature.addGroup_object}}" bindtap="turnToSearchPage"><label class="ico-moon icon-search"></label>{{data.customFeature.placeholder}}</view>
    </view>
    <view class="goodsFilter-filter-tab-wrap" style="{{filterWxsModule.parseStyle(data.customFeature.sortStyle.style)}}">
      <view class="goodsFilter-tab-item" style="color:{{data.tab == 0 ?  data.customFeature.selectedColor : ''}}" data-compid="{{data.compId}}" bindtap="sortByDefault">综合</view>
      <view class="goodsFilter-tab-item" style="color:{{data.tab == 1 ?  data.customFeature.selectedColor : ''}}" data-compid="{{data.compId}}" bindtap="sortBySales">销量</view>
      <view class="goodsFilter-tab-item goodsFilter-pick-up" data-compid="{{data.compId}}" bindtap="pickUpStyle" style="color:{{data.tab == 3 ?  data.customFeature.selectedColor : ''}}">取货<text class="ico-moon icon-filter-down" style="color:{{data.tab == 3 ?  data.customFeature.selectedColor : ''}}"></text></view>
      <view class="goodsFilter-tab-item goodsFilter-tab-price" style="color:{{data.tab == 2 ?  data.customFeature.selectedColor : ''}}" data-direction="{{data.direction}}" data-compid="{{data.compId}}" bindtap="sortByPrice">价格
        <view class="goodsFilter-label">
          <text class="goodsFilter-up ico-moon icon-filter-up" style="color:{{data.tab == 2 && data.sortDirection == 1 ?  data.customFeature.selectedColor : data.customFeature.sortStyle.style.color}}"></text>
          <text class="goodsFilter-down ico-moon icon-filter-down" style="color:{{data.tab == 2 && data.sortDirection == 0 ?  data.customFeature.selectedColor : data.customFeature.sortStyle.style.color}}"></text>
        </view>
      </view>
      <!-- <view class="goodsFilter-tab-item ico-moon {{ data.styleType == 1 ? 'icon-list-block' : 'icon-list-vertical'}}" data-compid="{{data.compId}}" bindtap="switchStyle"></view> -->
      <view class="goodsFilter-tab-item goodsFilter-filter" style="color:{{data.hasFilter ?  data.customFeature.selectedColor : ''}}"data-compid="{{data.compId}}" bindtap="filterList">筛选
        <text class="ico-moon icon-filter-f"></text>
      </view>
    </view>
    <view wx:if="{{data.showPickUpBox}}" class="filter-pick-up-box">
      <view class="pick-style-content">
        <view wx:if="{{data.tabExpress == 1}}" data-type="1" data-compid="{{data.compId}}" catchtap='selectPickUp' style="color:{{data.pickUpObj[1] ? data.customFeature.selectedColor : ''}}">快递<text wx:if="{{data.pickUpObj[1]}}" style="background:{{data.customFeature.selectedColor}}" class="pcik-bottom-line"></text><text wx:if="{{data.pickUpObj[1]}}" class="pull-right ico-moon icon-gou"></text></view>
        <view wx:if="{{data.tabDelivery == 1}}" data-type="3" data-compid="{{data.compId}}" catchtap='selectPickUp'  style="color:{{data.pickUpObj[3] ? data.customFeature.selectedColor : ''}}">上门自提<text wx:if="{{data.pickUpObj[3]}}" style="background:{{data.customFeature.selectedColor}}" class="pcik-bottom-line"></text><text wx:if="{{data.pickUpObj[3]}}" class="pull-right ico-moon icon-gou"></text></view>
        <view wx:if="{{data.tabIntraCity == 1}}" data-type="2" data-compid="{{data.compId}}" catchtap='selectPickUp' style="color:{{data.pickUpObj[2] ? data.customFeature.selectedColor : ''}}">同城配送<text wx:if="{{data.pickUpObj[2]}}" style="background:{{data.customFeature.selectedColor}}" class="pcik-bottom-line"></text><text wx:if="{{data.pickUpObj[2]}}" class="pull-right ico-moon icon-gou"></text></view>
      </view>
      <view class="pick-btn-content"><text data-compid="{{data.compId}}" catchtap="resetPickBtn">重置</text><text data-compid="{{data.compId}}" class="sure-pick-btn" style="background: {{data.customFeature.selectedColor}}" catchtap="surePickBtn">确定</text></view>
    </view>
  </view>
  <view wx:if="{{data.showPickUpBox}}" data-compid="{{data.compId}}" catchtap="hideFilterPickUpBox" class="filter-pick-up-mask"></view>
</template>



<!-- 商品列表 -->
<wxs module="addshoppingcartImageModule">
  var isImage = function(string) {
    var a = string || 'addshoppingcart1';
    return a.indexOf('addshoppingcart');
  }
  module.exports.isImage = isImage;
</wxs>

<!-- 积分商城样式 -->
<template name="zcIntegralGoodsList">
  <scroll-view class="element goods-list scroll-ele goods-list-mode-{{data.customFeature.mode}} {{(data.customFeature.mode == 2 && data.curpage > 0) ? 'hor-request-status' : ''}}"
               data-param="{{data.param}}"
               data-compid="{{data.compId}}"
               data-type="goods-list"
               style="{{data.style}}"
               scroll-y="{{(data.customFeature.mode == 2 || data.customFeature.vesselAutoheight != 0) ? false : true}}"
               scroll-x="{{data.customFeature.mode == 2? true: false}}"
               scroll-top="{{data.scrollTop}}"
               data-curpage="{{data.curpage}}"
               bindscrolltolower="goodsScrollFunc"
               bindanimationend="animationEnd">
    <view class="js-list-container" data-list-index="0" wx:if="{{data.customFeature.mode !== 3}}">
      <view class="goods-list-item background-ele router js-to-detail"
            wx:for="{{data.goods_data}}" wx:key="" data-id="{{item.form_data.id}}" style="{{data.list_style}};height: {{data.customFeature.mode !== 0 ? (data.customFeature.mode === 1 ? '300px ': '280px') : ''}};margin-bottom:{{data.customFeature.mode !== 0 ? '0px' : ''}}" data-contact="{{data.customFeature.ifUseContact}}" data-goods-type="{{item.form_data.goods_type}}" data-group="{{item.form_data.is_group_buy}}" data-groupid="{{item.form_data.group_buy_activity_id}}" data-hidestock="{{data.customFeature.isHideStock || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}"
            catchtap="turnToGoodsDetail"
            >
        <view class="inner-content" style="vertical-align: top;">
          <image class="list-img" src="{{item.form_data.cover}}" style="{{data.img_style}}position: relative;" mode="scaleToFill">
              <image class="goods-subscript" wx:if="{{item.form_data.corner_mark > 0}}" src="{{item.form_data.corner_url}}"></image>
          </image>
          <view class="title-container" style="width: {{data.title_width.width}};">
            <view class="title">{{item.form_data.title}}</view>
            <block wx:if="{{data.customFeature.isShowVirtualPrice && data.customFeature.form == 'goods'}}">
              <block wx:if="{{data.customFeature.mode == 0}}">
                <view wx:if="{{!data.customFeature.isHideSales}}" style="width: {{data.title_width.width}};position:absolute;bottom: 0;padding-left: 10px;height:60%;">
                  <view class="price" style="margin-bottom:10rpx;{{'color:' + data.storeStyle.theme }}">
                    <text style="font-size:28.125rpx;margin-right: 10rpx;" wx:if="{{item.form_data.goods_type != 1 && item.form_data.price != '0.00'}}">¥</text>
                    <text wx:if="{{item.form_data.goods_type != 1 && item.form_data.price != '0.00'}}">{{(item.form_data.goods_type != '1' ? item.form_data.price : (item.form_data.price != '0.00' ? item.form_data.price : '免费'))}}</text>
                    <text wx:if="{{item.form_data.max_can_use_integral != 0 && item.form_data.goods_type != 1 && item.form_data.price != '0.00'}}">+</text>
                    <text wx:if="{{item.form_data.max_can_use_integral != 0}}">{{item.form_data.max_can_use_integral}}积分</text>
                  </view>
                  <view style="bottom:0;"><text class="sales">销量：{{item.form_data.sales}}</text><label wx:if="{{item.form_data.is_group_buy != 1 &&data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) >= 0) && (data.customFeature.form == 'goods'||data.customFeature.form == 'tostore')}}" class="addShoppingcart ico-moon icon-{{data.customFeature.addShoppingCartImageSrc || 'addshoppingcart1'}}" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"></label><label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) < 0) && (data.customFeature.form == 'goods'||data.customFeature.form == 'tostore')}}" class="addShoppingcart shoppingImage" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"><image src="{{data.customFeature.addShoppingCartImageSrc}}"></image></label></view>
                </view>
                <view wx:if="{{data.customFeature.isHideSales}}" style="width: {{data.title_width.width}};padding-left: 10px;">
                  <view class="price" style="{{'color:' + data.storeStyle.theme }}">
                    <text style="font-size:28.125rpx;margin-right: 10rpx;color: {{data.storeStyle.theme }}" wx:if="{{item.form_data.goods_type != 1 && item.form_data.price != '0.00'}}">¥</text>
                    <text style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.goods_type != 1 && item.form_data.price != '0.00'}}">{{(item.form_data.goods_type != '1' ? item.form_data.price : (item.form_data.price != '0.00' ? item.form_data.price : '免费'))}}</text>
                    <text style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.max_can_use_integral != 0 && item.form_data.goods_type != 1 && item.form_data.price != '0.00'}}">+</text>
                    <text style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.max_can_use_integral != 0}}">{{item.form_data.max_can_use_integral}}积分</text>
                  </view>
                </view>
              </block>
              <block wx:else>
                <view style="width: {{data.title_width.width}}">
                  <view style="padding-left:0;">
                    <view class="integral-flex-wrap">
                      <text class="price" style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.price != '0.00'}}">¥ {{item.form_data.price}}</text>
                      <text>
                        <text class="price" style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.max_can_use_integral != 0 && item.form_data.price != '0.00'}}">+</text>
                        <text class="price" style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.max_can_use_integral != 0}}">{{item.form_data.max_can_use_integral}}积分</text>
                      </text>
                    </view>
                  </view>
                  <view wx:if="{{ !data.customFeature.isHideSales }}" class="sales">销量：{{item.form_data.sales}}</view>
                </view>
              </block>
            </block>
            <block wx:else>
              <view style="width: {{data.title_width.width}}">
                <view class="integral-flex-wrap">
                  <text class="price" wx:if="{{item.form_data.price != '0.00'}}" style="{{'color:' + data.storeStyle.theme }}">¥ {{item.form_data.price}}</text>
                  <text>
                    <text class="price" style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.max_can_use_integral != 0 && item.form_data.price != '0.00'}}">+</text>
                    <text class="price" style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.max_can_use_integral != 0}}">{{item.form_data.max_can_use_integral}}积分</text>
                  </text>
                </view>
                <text wx:if="{{ !data.customFeature.isHideSales }}" class="sales">销量：{{item.form_data.sales}}</text>
              </view>
            </block>
          </view>
        </view>
      </view>
    </view>
    <view class="js-list-container four-goods-list" data-list-index="0" wx:if="{{data.customFeature.mode === 3}}">
      <view class="goods-list-item background-ele router js-to-detail"
            wx:for="{{data.goods_data}}" wx:key="" data-id="{{item.form_data.id}}" style="{{data.list_style}}" data-contact="{{data.customFeature.ifUseContact}}" data-goods-type="{{item.form_data.goods_type}}" data-group="{{item.form_data.is_group_buy}}" data-groupid="{{item.form_data.group_buy_activity_id}}"  data-hidestock="{{data.customFeature.isHideStock || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice  || ''}}"
            catchtap="turnToGoodsDetail">
        <view style="position: relative;">
          <image class="goods-subscript" wx:if="{{item.form_data.corner_mark > 0}}" src="{{item.form_data.corner_url}}"></image>
          <image class="list-img" src="{{item.form_data.cover}}" style="{{data.img_style}}" mode="scaleToFill"></image>
        </view>
        <view class="four-goods-content">
          <view class="title">{{item.form_data.title}}</view>
          <view class="price-box">
            <text class="integral-price price" style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.price != '0.00'}}">¥ {{item.form_data.price}}</text>
            <text class="integral-price price" style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.max_can_use_integral != 0 && item.form_data.price != '0.00'}}">+</text>
            <text class="integral-price price" style="{{'color:' + data.storeStyle.theme }}" wx:if="{{item.form_data.max_can_use_integral != 0}}">{{item.form_data.max_can_use_integral}}积分</text>
            <text class="virtual_price" wx:if="{{item.form_data.virtual_price != 0 && data.customFeature.isShowVirtualPrice}}">¥{{item.form_data.virtual_price}}</text>
            <label wx:if="{{data.customFeature.isHideSales && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) >= 0)}}" class="addShoppingcart ico-moon icon-{{data.customFeature.addShoppingCartImageSrc || 'addshoppingcart1'}}" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"></label>
                <label wx:if="{{data.customFeature.isHideSales && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) < 0)}}" class="addShoppingcart shoppingImage" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"><image src="{{data.customFeature.addShoppingCartImageSrc}}"></image></label>
          </view>
          <view class="sales-box" wx:if="{{ !data.customFeature.isHideSales }}">
            <text class="sales">销量：{{item.form_data.sales}}</text>
          </view>
        </view>
      </view>
    </view>
    <template wx:if="{{data.loading}}" is="requestLoading"></template>
    <template wx:if="{{data.is_more == 0 && data.goods_data.length == 0}}" is="requestNone" data="{{data: '你还未添加任何商品数据~'}}"></template>
    <template wx:if="{{data.loadingFail}}" is="requestFail" data="{{refreshEvent: 'goodsScrollFunc', compId: data.compId}}"></template>
    <template wx:if="{{data.is_more == 0 && data.goods_data.length > 0 && data.customFeature.isShowFinishText}}" is="requestAll"></template>
    <view class="loading-btn" wx:if="{{data.customFeature.vesselAutoheight == 1 && data.customFeature.loadingMethod == 1 && data.customFeature.mode != 2 && data.is_more && data.is_more != 0 && !data.loading && !data.loadingFail }}" data-compid="{{data.compId}}" bindtap="goodsScrollFunc">
      <image wx:if="{{data.customFeature.loadingStyle == 'img'}}" mode="aspectFill" src="{{data.customFeature.loadingImg}}"></image>
      <text wx:elif="{{data.customFeature.loadingStyle == 'text'}}" style="color: {{data.customFeature.loadingColor}};">{{data.customFeature.loadingText}}</text>
    </view>
  </scroll-view>
</template>

<!-- 判断商品是否包邮 -->
<wxs module="goodsExpressFree">
  var isFree = function(goods) {
    var expressFeeSort = goods.form_data.goods_express_data.express_fee_sort;
    if(expressFeeSort.length == 1 && expressFeeSort[0] == 0){
      return true;
    }else{
      return false;
    }
  }
  module.exports.isFree = isFree;
</wxs>
<template name="zcGoodsList">
  <scroll-view class="element goods-list scroll-ele goods-list-mode-{{data.customFeature.mode}} {{(data.customFeature.mode == 2 && data.curpage > 0) ? 'hor-request-status' : ''}}"
               data-param="{{data.param}}"
               data-compid="{{data.compId}}"
               data-type="goods-list"
               style="{{data.style}}"
               scroll-y="{{(data.customFeature.mode == 2 || data.customFeature.vesselAutoheight != 0) ? false : true}}"
               scroll-x="{{data.customFeature.mode == 2? true: false}}"
               scroll-top="{{data.scrollTop}}"
               data-curpage="{{data.curpage}}"
               bindscrolltolower="goodsScrollFunc"
               bindanimationend="animationEnd">
    <view class="js-list-container hotel_appointment" wx:if="{{data.customFeature.form == 'new_appointment' && data.customFeature.unit == 3}}" data-goods-type="10" data-unit="1" catchtap='turnToGoodsDetail'>
      <view class='hotel-section area'>
        <view class='box'>
          <view class='h'>目的地</view>
          <!-- <view class='p'>XX市XX区XX街道</view> -->
        </view>
        <view class='ico-moon icon-rightarrow'></view>
      </view>
       <wxs module="hotelDefaultTime">
        var defaultTime = function(date){
          var date =getDate(date) || getDate(),
          nextDate =getDate(getDate().setDate(date.getDate()+1)),
          dayList = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],
          start_day = dayList[date.getDay()],
          end_day =dayList[nextDate.getDay()],
          start_date = date.getMonth()+1 +'月'+date.getDate()+'日',
          end_date = nextDate.getMonth()+1 +'月'+nextDate.getDate()+'日';
          return {
            start_day:start_day,
            end_day:end_day,
            start_date:start_date,
            end_date:end_date
          }
        }
        module.exports = defaultTime
      </wxs>
      <view class='hotel-section time'>
        <view class='enter-time'>
          <view class='h'>{{hotelDefaultTime(data.customFeature.now_date).start_day}} 入住</view>
          <view class='p'>{{hotelDefaultTime(data.customFeature.now_date).start_date}}</view>
        </view>
        <view class='dis-time'>
          共1晚
        </view>
        <view class='leave-time'>
          <view class='h'>{{hotelDefaultTime(data.customFeature.now_date).end_day}} 离店</view>
          <view class='p'>{{hotelDefaultTime(data.customFeature.now_date).end_date}}</view>
        </view>
      </view>
    </view>
    <view class="js-list-container" data-list-index="0" wx:elif="{{data.customFeature.mode !== 3  && data.customFeature.unit != 3}}">
      <view class="goods-list-item background-ele router js-to-detail"
            wx:for="{{data.goods_data}}" wx:key="" data-id="{{item.form_data.id}}" style="{{data.list_style}}" data-goods-type="{{item.form_data.goods_type}}" data-group="{{item.form_data.is_group_buy}}" data-groupid="{{item.form_data.group_buy_activity_id}}" catchtap="turnToGoodsDetail">
        <view class="inner-content">
          <image class="list-img" src="{{item.form_data.cover}}" style="{{data.img_style}}position: relative;" mode="scaleToFill">
              <image class="goods-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 0}}" src="{{item.form_data.corner_url}}"></image>
          </image>
          <view class="title-container" style="width: {{data.title_width.width}};">
            <view class="title"><image class="title-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 1}}" src="{{item.form_data.corner_url}}"></image>{{item.form_data.title}}</view>
            <block wx:if="{{data.customFeature.isShowVirtualPrice && ( data.customFeature.form == 'goods' || data.customFeature.form == 'new_appointment')}}">
              <block wx:if="{{data.customFeature.mode == 0}}">
                <view wx:if="{{!data.customFeature.isHideSales}}" style="width: {{data.title_width.width}};position:absolute;bottom: 0;padding-left: 10px;height:60%;">
                  <view class="price" style="margin-bottom:10rpx;{{'color:' + data.storeStyle.theme }}"><text style="font-size:28.125rpx;margin-right: 10rpx;" wx:if="{{item.form_data.goods_type != 1 && item.form_data.price != '0.00'}}">¥</text><text>{{(item.form_data.goods_type != '1' ? item.form_data.price : (item.form_data.price != '0.00' ? item.form_data.price : '免费'))}}</text><text class="virtual_price" wx:if="{{item.form_data.virtual_price != 0}}">¥{{item.form_data.virtual_price}}</text></view>
                  <view style="bottom:0;"><text class="sales">销量：{{item.form_data.sales}}</text><label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.form != 'new_appointment'&& data.customFeature.form != 'appointment' &&data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) >= 0) && (data.customFeature.form == 'goods'||data.customFeature.form == 'tostore')}}" class="addShoppingcart ico-moon icon-{{data.customFeature.addShoppingCartImageSrc || 'addshoppingcart1'}}" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"></label><label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) < 0) && (data.customFeature.form == 'goods'||data.customFeature.form == 'tostore')}}" class="addShoppingcart shoppingImage" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"><image src="{{data.customFeature.addShoppingCartImageSrc}}"></image></label></view>
                </view>
                <view wx:if="{{data.customFeature.isHideSales}}" style="width: {{data.title_width.width}};padding-left: 10px;">
                  <view class="price" style="{{'color:' + data.storeStyle.theme }}">
                    <text style="font-size:28.125rpx;margin-right: 10rpx;" wx:if="{{item.form_data.goods_type != 1 && item.form_data.price != '0.00'}}">¥</text><text>{{(item.form_data.goods_type != '1' ? item.form_data.price : (item.form_data.price != '0.00' ? item.form_data.price : '免费'))}}</text>
                  <text class="virtual_price" wx:if="{{item.form_data.virtual_price != 0}}">¥{{item.form_data.virtual_price}}</text>
                  <label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.form != 'new_appointment'&& data.customFeature.form != 'appointment' && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) >= 0) }}" class="addShoppingcart ico-moon icon-{{data.customFeature.addShoppingCartImageSrc || 'addshoppingcart1'}}" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"></label>
                  <label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.form != 'new_appointment'&& data.customFeature.form != 'appointment' &&data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) < 0)}}" class="addShoppingcart shoppingImage" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"><image src="{{data.customFeature.addShoppingCartImageSrc}}"></image></label></view>
                </view>
              </block>
              <block wx:else>
                <view style="width: {{data.title_width.width}}">
                  <view style="padding-left:0;">
                  <text class="price" style="{{'color:' + data.storeStyle.theme }}">¥ {{item.form_data.price}}</text>
                  <text class="virtual_price" style="margin-left: 0;" wx:if="{{item.form_data.virtual_price != 0}}">¥{{item.form_data.virtual_price}}</text>
                  </view>
                  <text wx:if="{{ !data.customFeature.isHideSales }}" class="sales">销量：{{item.form_data.sales}}</text>
                  <label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.form != 'new_appointment'&& data.customFeature.form != 'appointment' && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) >= 0) }}" class="addShoppingcart ico-moon icon-{{data.customFeature.addShoppingCartImageSrc || 'addshoppingcart1'}}" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"></label>
                  <label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.form != 'new_appointment'&& data.customFeature.form != 'appointment' && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) < 0) }}" class="addShoppingcart shoppingImage" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"><image src="{{data.customFeature.addShoppingCartImageSrc}}"></image></label>
                </view>
              </block>
            </block>
            <block wx:else>
              <view style="width: {{data.title_width.width}}">
                <text class="price" style="{{'color:' + data.storeStyle.theme }}">¥ {{item.form_data.price}}</text>
                <text wx:if="{{ !data.customFeature.isHideSales }}" class="sales">销量：{{item.form_data.sales}}</text>
                <label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.form != 'new_appointment'&& data.customFeature.form != 'appointment' && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) >= 0)}}" class="addShoppingcart ico-moon icon-{{data.customFeature.addShoppingCartImageSrc || 'addshoppingcart1'}}" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"></label>
                <label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.form != 'new_appointment'&& data.customFeature.form != 'appointment' && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) < 0)}}" class="addShoppingcart shoppingImage" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"><image src="{{data.customFeature.addShoppingCartImageSrc}}"></image></label>
              </view>
            </block>
          </view>
        </view>
      </view>
    </view>
    <view class="js-list-container four-goods-list" data-list-index="0" wx:if="{{data.customFeature.mode === 3 && data.customFeature.unit != 3}}">
      <view class="goods-list-item background-ele router js-to-detail"
            wx:for="{{data.goods_data}}" wx:key="" data-id="{{item.form_data.id}}" style="{{data.list_style}}" data-goods-type="{{item.form_data.goods_type}}" data-group="{{item.form_data.is_group_buy}}" data-groupid="{{item.form_data.group_buy_activity_id}}" catchtap="turnToGoodsDetail">
        <view style="position: relative;">
          <image class="goods-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 0}}" src="{{item.form_data.corner_url}}"></image>
          <image class="list-img" src="{{item.form_data.cover}}" style="{{data.img_style}}" mode="scaleToFill"></image>
        </view>
        <view class="four-goods-content">
          <view class="title"><image class="title-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 1}}" src="{{item.form_data.corner_url}}"></image>{{item.form_data.title}}</view>
          <view class="price-box">
            <text class="real-price" style="{{'color:' + data.storeStyle.theme }}">¥ {{item.form_data.price}}</text>
            <text class="virtual_price" wx:if="{{item.form_data.virtual_price != 0 && data.customFeature.isShowVirtualPrice}}">¥{{item.form_data.virtual_price}}</text>
            <label wx:if="{{data.customFeature.isHideSales && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) >= 0)}}" class="addShoppingcart ico-moon icon-{{data.customFeature.addShoppingCartImageSrc || 'addshoppingcart1'}}" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"></label>
                <label wx:if="{{data.customFeature.isHideSales && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) < 0)}}" class="addShoppingcart shoppingImage" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"><image src="{{data.customFeature.addShoppingCartImageSrc}}"></image></label>
          </view>
          <view class="sales-box" wx:if="{{ !data.customFeature.isHideSales }}">
            <text class="sales">销量：{{item.form_data.sales}}</text>
            <label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.form != 'new_appointment' && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) >= 0)}}" class="addShoppingcart ico-moon icon-{{data.customFeature.addShoppingCartImageSrc || 'addshoppingcart1'}}" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"></label>
            <label wx:if="{{item.form_data.is_group_buy != 1 && data.customFeature.form != 'new_appointment' && data.customFeature.isShoppingCart && (addshoppingcartImageModule.isImage(data.customFeature.addShoppingCartImageSrc) < 0)}}" class="addShoppingcart shoppingImage" data-id="{{item.form_data.id}}" data-buynow="{{data.customFeature.isBuyNow || ''}}" data-isshowvirtualprice="{{data.customFeature.isShowVirtualPrice}}" catchtap="{{ item.form_data.goods_type == 0 ? 'showGoodsShoppingcart' : 'showAddShoppingcart' }}"><image src="{{data.customFeature.addShoppingCartImageSrc}}"></image></label>
          </view>
        </view>
      </view>
    </view>
    <template wx:if="{{data.loading}}" is="requestLoading"></template>
    <template wx:if="{{data.is_more == 0 && data.goods_data.length == 0  && data.customFeature.unit != 3}}" is="requestNone" data="{{data: '你还未添加任何商品数据~'}}"></template>
    <template wx:if="{{data.loadingFail}}" is="requestFail" data="{{refreshEvent: 'goodsScrollFunc', compId: data.compId}}"></template>
    <template wx:if="{{data.is_more == 0 && data.goods_data.length > 0 && data.customFeature.isShowFinishText}}" is="requestAll"></template>
    <view class="loading-btn" wx:if="{{data.customFeature.vesselAutoheight == 1 && data.customFeature.loadingMethod == 1 && data.customFeature.mode != 2 && data.is_more && data.is_more != 0 && !data.loading && !data.loadingFail }}" data-compid="{{data.compId}}" bindtap="goodsScrollFunc">
      <image wx:if="{{data.customFeature.loadingStyle == 'img'}}" mode="aspectFill" src="{{data.customFeature.loadingImg}}"></image>
      <text wx:elif="{{data.customFeature.loadingStyle == 'text'}}" style="color: {{data.customFeature.loadingColor}};">{{data.customFeature.loadingText}}</text>
    </view>
  </scroll-view>
</template>
<!-- 电商新样式样式 -->
<template name="newGoodsList">
  <scroll-view class="new-goods-list {{(data.customFeature.mode == 2 && data.curpage > 0) ? 'hor-request-status' : ''}}"
               data-param="{{data.param}}"
               data-compid="{{data.compId}}"
               data-type="goods-list"
               style="{{data.style + (data.customFeature.mode != 0 ? 'background: #f3f3f3;' : '')}}"
               scroll-y="{{data.customFeature.mode == 2 ? false : true}}"
               scroll-x="{{data.customFeature.mode == 2 ? true : false}}"
               scroll-top="{{data.scrollTop}}"
               data-curpage="{{data.curpage}}"
               bindscrolltolower="goodsScrollFunc"
               bindanimationend="animationEnd">
    <!-- 样式1 -->
    <block wx:if="{{ data.customFeature.mode == 0 }}">
      <view class="new-goods-list-one">
        <view class="goods-content" wx:for="{{data.goods_data}}" wx:key="" data-id="{{item.form_data.id}}" data-goods-type="{{item.form_data.goods_type}}" catchtap="turnToGoodsDetail" data-group="{{item.form_data.is_group_buy}}" data-groupid="{{item.form_data.group_buy_activity_id}}" >
          <image class="goods-image" src="{{item.form_data.cover}}" mode="scaleToFill">
            <image class="goods-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 0}}" src="{{item.form_data.corner_url}}"></image>
          </image>
          <!-- 样式1-1 -->
          <view wx:if="{{ data.customFeature.styleMode == '0-1' }}" class="goods-detail">
            <view class="title"><image class="title-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 1}}" src="{{item.form_data.corner_url}}"></image>{{item.form_data.title}}</view>
            <view class="discount-box">
              <text class="discount" wx:if="{{item.form_data.virtual_price != 0}}" style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}">{{ item.form_data.discount }}折优惠</text>
              <text wx:if="{{goodsExpressFree.isFree(item)}}" class="express" style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}">包邮</text>
            </view>
            <view class="price-box">
              <text style="{{'color:' + data.storeStyle.theme}}" class="real-price">￥{{item.form_data.price}}</text>
              <text wx:if="{{item.form_data.virtual_price != 0}}" class="virtual-price">¥{{item.form_data.virtual_price}}</text>
            </view>
            <view class="sales-box">
              <text class="sales">{{item.form_data.sales}}人付款</text>
              <label style="{{'color:' + data.storeStyle.theme}}" class="shopping-icon ico-moon icon-addshoppingcart5" data-id="{{item.form_data.id}}" catchtap="showGoodsShoppingcart"></label>
            </view>
          </view>
          <!-- 样式1-1 -->
          <!-- 样式1-2 -->
          <view wx:if="{{ data.customFeature.styleMode == '0-2' }}" class="goods-detail one-two-mode">
            <view class="title"><image class="title-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 1}}" src="{{item.form_data.corner_url}}"></image>{{item.form_data.title}}</view>
            <text class="virtual-price">{{item.form_data.virtual_price != 0 ? '¥' + item.form_data.virtual_price : ''}}</text>
            <view class="price-box">
              <text style="{{'color:' + data.storeStyle.theme }}" class="real-price">￥{{item.form_data.price}}</text>
              <text style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}" class="discount two-style-discount" wx:if="{{item.form_data.virtual_price != 0}}"><text style="{{'border-right-color:' + data.storeStyle.theme + '33'}}" class="trangel"></text>{{ item.form_data.discount }}折</text>
            </view>
            <view class="sales-box">
              <text wx:if="{{goodsExpressFree.isFree(item)}}" class="express" style="{{'color:' + data.storeStyle.theme + ';border-color:' + data.storeStyle.theme}}">包邮</text>
              <text class="sales">{{item.form_data.sales}}人付款</text>
              <label style="{{'color:' + data.storeStyle.theme}}" class="shopping-icon ico-moon icon-addshoppingcart5" data-id="{{item.form_data.id}}" catchtap="showGoodsShoppingcart"></label>
            </view>
          </view>
          <!-- 样式1-2 -->
        </view>
      </view>
    </block>
    <!-- 样式2 -->
    <block wx:if="{{ data.customFeature.mode == 1 }}">
      <view class="new-goods-list-two">
        <view class="goods-content" wx:for="{{data.goods_data}}" wx:key="" data-id="{{item.form_data.id}}" data-goods-type="{{item.form_data.goods_type}}" catchtap="turnToGoodsDetail"  data-group="{{item.form_data.is_group_buy}}" data-groupid="{{item.form_data.group_buy_activity_id}}" >
          <image class="list-img" src="{{item.form_data.cover}}" style="width: 360rpx;height: 360rpx;" mode="scaleToFill">
            <image class="goods-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 0}}" src="{{item.form_data.corner_url}}"></image>
          </image>
          <view class="title"><image class="title-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 1}}" src="{{item.form_data.corner_url}}"></image>{{item.form_data.title}}</view>
          <!-- 样式2-1 -->
          <view wx:if="{{ data.customFeature.styleMode == '1-1' }}" class="goods-detail">
            <view class="discount-box">
              <text class="discount" wx:if="{{item.form_data.virtual_price != 0}}" style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}">{{ item.form_data.discount }}折优惠</text>
              <text wx:if="{{goodsExpressFree.isFree(item)}}" class="express" style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}">包邮</text>
            </view>
            <view class="price-box">
              <text style="{{'color:' + data.storeStyle.theme }}" class="real-price">￥{{item.form_data.price}}</text>
              <text wx:if="{{item.form_data.virtual_price != 0}}" class="virtual-price">¥{{item.form_data.virtual_price}}</text>
            </view>
            <view class="sales-box">
              <text class="sales">{{item.form_data.sales}}人付款</text>
              <label style="{{'color:' + data.storeStyle.theme}}" class="shopping-icon ico-moon icon-addshoppingcart5" data-id="{{item.form_data.id}}" catchtap="showGoodsShoppingcart"></label>
            </view>
          </view>
          <!-- 样式2-1 -->
          <!-- 样式2-2 -->
          <view wx:if="{{ data.customFeature.styleMode == '1-2' }}" class="goods-detail two-two-mode">
            <text class="virtual-price">{{item.form_data.virtual_price != 0 ? '¥' + item.form_data.virtual_price : ''}}</text>
            <view class="price-box">
              <text style="{{'color:' + data.storeStyle.theme }}" class="real-price">￥{{item.form_data.price}}</text>
              <text style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}" class="discount two-style-discount" wx:if="{{item.form_data.virtual_price != 0}}"><text style="{{'border-right-color:' + data.storeStyle.theme + '33'}}" class="trangel"></text>{{ item.form_data.discount }}折</text>
            </view>
            <view class="sales-box">
              <text wx:if="{{goodsExpressFree.isFree(item)}}" class="express" style="{{'color:' + data.storeStyle.theme + ';border-color:' + data.storeStyle.theme}}">包邮</text>
              <text class="sales">{{item.form_data.sales}}人付款</text>
              <label style="{{'color:' + data.storeStyle.theme}}" class="shopping-icon ico-moon icon-addshoppingcart5" data-id="{{item.form_data.id}}" catchtap="showGoodsShoppingcart"></label>
            </view>
          </view>
          <!-- 样式2-2 -->
        </view>
      </view>
    </block>
    <!-- 样式3 -->
    <block wx:if="{{ data.customFeature.mode == 2 }}">
      <view class="new-goods-list-three">
        <view class="goods-content" wx:for="{{data.goods_data}}" wx:key="" data-id="{{item.form_data.id}}" data-goods-type="{{item.form_data.goods_type}}" catchtap="turnToGoodsDetail"  data-group="{{item.form_data.is_group_buy}}" data-groupid="{{item.form_data.group_buy_activity_id}}" >
          <image class="list-img" src="{{item.form_data.cover}}" style="width: 360rpx;height: 360rpx;" mode="scaleToFill">
            <image class="goods-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 0}}" src="{{item.form_data.corner_url}}"></image>
          </image>
          <view class="title"><image class="title-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 1}}" src="{{item.form_data.corner_url}}"></image>{{item.form_data.title}}</view>
          <!-- 样式3-1 -->
          <view wx:if="{{ data.customFeature.styleMode == '2-1' }}" class="goods-detail">
            <view class="discount-box">
              <text class="discount" wx:if="{{item.form_data.virtual_price != 0}}" style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}">{{ item.form_data.discount }}折优惠</text>
              <text wx:if="{{goodsExpressFree.isFree(item)}}" class="express" style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}">包邮</text>
            </view>
            <view class="price-box">
              <text style="{{'color:' + data.storeStyle.theme }}" class="real-price">￥{{item.form_data.price}}</text>
              <text wx:if="{{item.form_data.virtual_price != 0}}" class="virtual-price">¥{{item.form_data.virtual_price}}</text>
            </view>
            <view class="sales-box">
              <text class="sales">{{item.form_data.sales}}人付款</text>
              <label style="{{'color:' + data.storeStyle.theme}}" class="shopping-icon ico-moon icon-addshoppingcart5" data-id="{{item.form_data.id}}" catchtap="showGoodsShoppingcart"></label>
            </view>
          </view>
          <!-- 样式3-1 -->
          <!-- 样式3-2 -->
          <view wx:if="{{ data.customFeature.styleMode == '2-2' }}" class="goods-detail three-two-mode">
            <text class="virtual-price">{{item.form_data.virtual_price != 0 ? '¥' + item.form_data.virtual_price : ''}}</text>
            <view class="price-box">
              <text style="{{'color:' + data.storeStyle.theme }}" class="real-price">￥{{item.form_data.price}}</text>
              <text style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}" class="discount two-style-discount" wx:if="{{item.form_data.virtual_price != 0}}"><text style="{{'border-right-color:' + data.storeStyle.theme + '33'}}" class="trangel"></text>{{ item.form_data.discount }}折</text>
            </view>
            <view class="sales-box">
              <text wx:if="{{goodsExpressFree.isFree(item)}}" class="express" style="{{'color:' + data.storeStyle.theme + ';border-color:' + data.storeStyle.theme}}">包邮</text>
              <text class="sales">{{item.form_data.sales}}人付款</text>
              <label style="{{'color:' + data.storeStyle.theme}}" class="shopping-icon ico-moon icon-addshoppingcart5" data-id="{{item.form_data.id}}" catchtap="showGoodsShoppingcart"></label>
            </view>
          </view>
          <!-- 样式3-2 -->
        </view>
      </view>
    </block>
    <!-- 样式4 -->
    <block wx:if="{{ data.customFeature.mode == 3 }}">
      <view class="new-goods-list-four">
        <view class="goods-content" wx:for="{{data.goods_data}}" wx:key="" data-id="{{item.form_data.id}}" data-goods-type="{{item.form_data.goods_type}}" catchtap="turnToGoodsDetail"  data-group="{{item.form_data.is_group_buy}}" data-groupid="{{item.form_data.group_buy_activity_id}}">
          <image class="goods-image" src="{{item.form_data.cover}}" mode="scaleToFill">
            <image class="goods-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 0}}" src="{{item.form_data.corner_url}}"></image>
          </image>
          <!-- 样式4-1 -->
          <view wx:if="{{ data.customFeature.styleMode == '3-1' }}" class="goods-detail">
            <view class="title"><image class="title-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 1}}" src="{{item.form_data.corner_url}}"></image>{{item.form_data.title}}</view>
            <view class="discount-box">
              <text class="discount" wx:if="{{item.form_data.virtual_price != 0}}" style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}">{{ item.form_data.discount }}折优惠</text>
              <text wx:if="{{goodsExpressFree.isFree(item)}}" class="express" style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}">包邮</text>
              <text class="sales">{{item.form_data.sales}}人付款</text>
            </view>
            <view class="price-box">
              <text style="{{'color:' + data.storeStyle.theme }}" class="real-price">￥{{item.form_data.price}}</text>
              <text wx:if="{{item.form_data.virtual_price != 0}}" class="virtual-price">¥{{item.form_data.virtual_price}}</text>
              <label style="{{'color:' + data.storeStyle.theme}}" class="shopping-icon ico-moon icon-addshoppingcart5" data-id="{{item.form_data.id}}" catchtap="showGoodsShoppingcart"></label>
            </view>
            <view class="sales-box">
            </view>
          </view>
          <!-- 样式4-1 -->
          <!-- 样式4-2 -->
          <view wx:if="{{ data.customFeature.styleMode == '3-2' }}" class="goods-detail four-two-mode">
            <view class="title"><image class="title-subscript" wx:if="{{item.form_data.corner_mark > 0 && item.form_data.corner_position == 1}}" src="{{item.form_data.corner_url}}"></image>{{item.form_data.title}}</view>
            <view class="price-box">
              <text style="{{'color:' + data.storeStyle.theme }}" class="real-price">￥{{item.form_data.price}}</text>
              <text wx:if="{{item.form_data.virtual_price != 0}}" class="virtual-price">¥{{item.form_data.virtual_price}}</text>
              <text style="{{'color:' + data.storeStyle.theme + ';background:' + data.storeStyle.theme + '33'}}" class="discount two-style-discount" wx:if="{{item.form_data.virtual_price != 0}}"><text style="{{'border-right-color:' + data.storeStyle.theme + '33'}}" class="trangel"></text>{{ item.form_data.discount }}折</text>
            </view>
            <view class="discount-box">
              <text wx:if="{{goodsExpressFree.isFree(item)}}" class="express" style="{{'color:' + data.storeStyle.theme + ';border-color:' + data.storeStyle.theme}}">包邮</text>
              <text class="sales">{{item.form_data.sales}}人付款</text>
              <label style="{{'color:' + data.storeStyle.theme}}" class="shopping-icon ico-moon icon-addshoppingcart5" data-id="{{item.form_data.id}}" catchtap="showGoodsShoppingcart"></label>
            </view>
          </view>
          <!-- 样式4-2 -->
        </view>
      </view>
    </block>
    <template wx:if="{{data.loading}}" is="requestLoading"></template>
    <template wx:if="{{data.is_more == 0 && data.goods_data.length == 0}}" is="requestNone" data="{{data: '你还未添加任何商品数据~'}}"></template>
    <template wx:if="{{data.loadingFail}}" is="requestFail" data="{{refreshEvent: 'goodsScrollFunc', compId: data.compId}}"></template>
    <template wx:if="{{data.is_more == 0 && data.goods_data.length > 0 && data.customFeature.isShowFinishText}}" is="requestAll"></template>
    <view class="loading-btn" wx:if="{{data.customFeature.vesselAutoheight == 1 && data.customFeature.loadingMethod == 1 && data.customFeature.mode != 2 && data.is_more && data.is_more != 0 && !data.loading && !data.loadingFail }}" data-compid="{{data.compId}}" bindtap="goodsScrollFunc">
      <image wx:if="{{data.customFeature.loadingStyle == 'img'}}" mode="aspectFill" src="{{data.customFeature.loadingImg}}"></image>
      <text wx:elif="{{data.customFeature.loadingStyle == 'text'}}" style="color: {{data.customFeature.loadingColor}};">{{data.customFeature.loadingText}}</text>
    </view>
  </scroll-view>
</template>
<!-- 热区 -->
<template name="zcHotSpot">
  <view class="element hotspot" style="{{data.style}}" data-event-params="{{data.customFeature}}" catchtap="{{data.customFeature.action && data.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">{{data.content}}</view>
</template>

<!-- 列表 -->
<template name="zcList">
  <view class="element list" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
      <view class="list-container {{data.customFeature.sec_mode}}">
        <block wx:for="{{data.content}}" wx:key="">
          <block wx:if="{{item.customFeature.action == 'turn-to-xcx'}}">
            <view class="list-item background-ele" style="{{item.listStyle}}">
              <navigator target="miniProgram" open-type="navigate" app-id="{{item.customFeature['xcx-appid']}}" path="{{item.customFeature['xcx-page-url'] || ''}}" version="release">
                <image class="list-img" src="{{item.pic}}" style="{{item.imgStyle}}"></image>
                <view class="title-container" style="{{item.titleWidth}}">
                  <view class="title">{{item.title}}</view>
                  <view class="sec-title" style="{{item.secTitleStyle}}">{{item.secTitle}}</view>
                </view>
              </navigator>
            </view>
          </block>
          <block wx:else>
            <view class="list-item background-ele" style="{{item.listStyle}}" data-event-params="{{item.customFeature}}" catchtap="{{item.customFeature.action && item.customFeature.action != 'none' ? 'tapEventCommonHandler' : ''}}">
              <image class="list-img" src="{{item.pic}}" style="{{item.imgStyle}}"></image>
              <view class="title-container" style="{{item.titleWidth}}">
                <view class="title">{{item.title}}</view>
                <view class="sec-title" style="{{item.secTitleStyle}}">{{item.secTitle}}</view>
              </view>
            </view>
          </block>
        </block>
      </view>
  </view>
</template>

<!-- 地图 -->
<template name="zcMap">
  <view class="element map" data-event-params="{{data.customFeature.markers_json_str}}" catchtap="tapMapDetail" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
    <view class="map-mask"></view>
    <map class="map-module" hidden="{{data.customFeature.type != 'withmap' }}" longitude="{{data.customFeature.lng}}" latitude="{{data.customFeature.lat}}" markers="{{data.customFeature.markers}}" scale="17"></map>
    <text class="icon-location ico-moon"></text><view class="map-link">{{data.content}}</view>
  </view>
</template>




<!-- 排序组件 -->
<template name="zcSort">
  <view class="element sort" style="{{data.style}}" bindanimationend="animationEnd" data-compid="{{ data.compId }}">
    <scroll-view scroll-x="true" data-selected="{{data.customFeature.selected}}" style="{{data.ul_style}}">
      <block wx:for="{{data.content}}" wx:for-index="idx" wx:for-item="itemName" wx:key="">
        <block wx:if="{{idx == data.customFeature.selected}}">
          <view class="item refresh selected" catchtap="sortListFunc"
                data-compid="{{ data.compId }}"
                data-listid="{{data.customFeature.sort_object}}"
                data-sortkey="{{itemName.customFeature.sort_key}}"
                data-sortdirection="{{itemName.customFeature.sort_direction}}"
                data-idx="{{idx}}"
                style="color:{{data.customFeature.selectedColor}}">
            <text>{{itemName.text}}</text>
            <label class="arr-wrap" wx:if="{{ idx != 0 }}">
              <text style="color: {{itemName.customFeature.sort_direction == 0 ? data.customFeature.selectedColor : '#ddd'}};" class="sort-arr arr-up">▲</text>
              <text style="color: {{itemName.customFeature.sort_direction == 1 ? data.customFeature.selectedColor : '#ddd'}};" class="sort-arr arr-down">▼</text>
            </label>
          </view>
        </block>
        <block wx:else>
          <view class="item refresh" catchtap="sortListFunc"
                data-compid="{{ data.compId }}"
                data-listid="{{data.customFeature.sort_object}}"
                data-sortkey="{{itemName.customFeature.sort_key}}"
                data-sortdirection="{{itemName.customFeature.sort_direction}}"
                data-idx="{{idx}}"
          >{{itemName.text}}</view>
        </block>
      </block>
    </scroll-view>
  </view>
</template>

<!-- 广告 -->
<template name="zcAdvertising">
  <view class="element advertising">
    <ad unit-id="{{data.customFeature['advertisingId']}}" style="{{data.style}}"></ad>
  </view>
</template>

<!-- 公众号 -->
<template name="zcOfficialAccount">
  <view class="element officialAccount">
    <official-account style="{{data.style}}"></official-account>
  </view>
</template>

<!-- 加载loading -->
<template name="requestLoading">
  <view class="loading-wrap">
    <view class="loading-view">
      <view class="loading-dot1"></view>
      <view class="loading-dot2"></view>
    </view>
  </view>
</template>

<!-- 加载没有数据 -->
<template name="requestNone">
  <view class="request-none">
    <image src="http://cdn.jisuapp.cn/static/webapp/images/request-none.png" mode="widthFix"></image>
    <view>{{data || '暂无数据'}}</view>
  </view>
</template>

<!-- 加载失败 -->
<template name="requestFail">
  <view class="request-fail">
    <view>数据加载失败~ </view>
    <button class="request-refresh-btn" data-compid="{{compId}}" bindtap="{{refreshEvent}}">刷新重试</button>
  </view>
</template>

<!-- 加载完所有数据 -->
<template name="requestAll">
  <view class="request-all">没有更多了</view>
</template>
